# 关于文档的查询

复杂操作搜索

> select(排序,分页,高亮,模糊查询,精准查询! )

![1597892352276](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892352276.png)

![1597892367286](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892367286.png)



输出结果不想要那么多,select *

现在是select name,age

![1597892385326](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892385326.png)

可以指定字段

结果的过滤

![1597892451582](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892451582.png)

我们之后使用Java操作ES,所有的方法和对象就是这里面的key!

> 排序

![1597892561417](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892561417.png)

> 分页查询

![1597892615017](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892615017.png)

数据下标还是从0开始,和之前所学的数据结构都是一样的!

![1597892717769](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892717769.png)

> 布尔值查询

must(and) ,所有条件都要符合 where id=1 and name=xxx

![1597892730673](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892730673.png)

should (or) ,所有条件都要符合 where id=1 or name = xxx

![1597892885428](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892885428.png)

must not (not)

![1597892928930](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892928930.png)

过滤器 filter

![1597892996458](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597892996458.png)



- gt 大于
- gte 大于等于
- lt 小于
- lte 小于等于

![1597893039013](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597893039013.png)

匹配多个条件

![1597893096034](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597893096034.png)

用空格分隔也行

![1597893131147](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597893131147.png)

> 精确查询

term 查询时直接通过倒排索引指定的词条进程精确查找的!

![1597893161217](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597893161217.png)

关于分词:

term,直接查询精确的

match,会使用分词器解析! (先分析分档,然后再通过分析的分档进行查询! )

**两个类型 text  keyword**

![1597893556500](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597893556500.png)

![1597893572562](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597893572562.png)


![1597893648565](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597893648565.png)



> 多个值匹配精确查询

![1597900914957](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597900914957.png)

> 高亮查询!

搜索的高亮条件,会在HTML里面自动的加上标签

![1597901143555](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597901143555.png)

![1597905816361](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597905816361.png)

这些其实MySQL也可以做,只是MySQL效率比较低

- 匹配
- 安装条件匹配
- 精确匹配
- 区间范围匹配
- 匹配字段过滤
- 多条件查询
- 高亮查询

![1597905914624](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597905914624.png)

![1597905922774](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597905922774.png)

![1597974155757](11_%E8%8A%B1%E5%BC%8F%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3.assets/1597974155757.png)